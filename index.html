<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DiagGC — Détection IA</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <style>
    :root { --bg:#0e0f12; --card:#17181d; --fg:#e9ecf1; --muted:#a8b0bc; --accent:#3b82f6; --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto}
    .wrap{max-width:900px;margin:24px auto;padding:16px}
    .title{font-weight:700;font-size:22px;margin:0 0 16px}
    .card{background:var(--card);border-radius:14px;padding:16px;margin-bottom:14px;border:1px solid #22252b}
    .row{display:grid;gap:10px}
    @media (min-width:720px){.row{grid-template-columns:1fr 1fr}}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type="text"]{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #272a31;background:#0f1115;color:var(--fg)}
    textarea{width:100%;min-height:120px;padding:10px 12px;border-radius:10px;border:1px solid #272a31;background:#0f1115;color:var(--fg);font-family:ui-monospace, SFMono-Regular, Menlo, Consolas}
    .btn{appearance:none;border:0;border-radius:12px;padding:10px 14px;background:var(--accent);color:#fff;font-weight:600;cursor:pointer}
    .btn.secondary{background:#2b2f37}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .grid{width:100%;border-collapse:collapse;margin-top:8px}
    .grid th,.grid td{border-bottom:1px solid #262a31;padding:10px;text-align:left}
    .pill{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;font-weight:700}
    .u-vert{background:#19381f;color:var(--ok)}
    .u-amber{background:#3b2e1a;color:var(--warn)}
    .u-red{background:#3a1518;color:var(--bad)}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <h1 class="title">DiagGC — Détection IA</h1>

    <div class="card row">
      <div>
        <label>Nom de l’ouvrage</label>
        <input id="ouvrage" type="text" placeholder="ex. Pont PK 58+550 – Saint-Sévres" />
      </div>
      <div>
        <label>Auteur du rapport</label>
        <input id="auteur" type="text" placeholder="ex. Rezzak Brahim" />
      </div>
    </div>

    <div class="card">
      <label>Configuration IA (JSON modifiable)</label>
      <textarea id="cfg">[
  { "id": "nateraw/image-classification", "weight": 0.9 },
  { "id": "apple/mobilevit-small",      "weight": 0.8 }
]</textarea>
      <p class="muted" style="margin-top:6px">Tu peux laisser par défaut.</p>
    </div>

    <div class="card row">
      <div>
        <label>Importer depuis la galerie</label>
        <input id="file" type="file" accept="image/*" />
      </div>
      <div>
        <label>Prendre une photo</label>
        <input id="camera" type="file" accept="image/*" capture="environment" />
      </div>
      <div style="grid-column:1/-1;display:flex;gap:10px;align-items:center">
        <button id="btn" class="btn">Diagnostiquer</button>
        <button id="clear" class="btn secondary">Effacer</button>
        <span id="status" class="muted">En attente…</span>
      </div>
    </div>

    <div class="card">
      <h3 style="margin:0 0 8px">Résultats IA (fusion des modèles)</h3>
      <table class="grid" id="tbl-results">
        <thead><tr><th>Label</th><th>Score</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="card">
      <h3 style="margin:0 0 8px">Interprétation SNCF (auto)</h3>
      <table class="grid" id="tbl-scnf">
        <thead><tr><th>Pathologie</th><th>Degré d’intervention</th><th>Urgence</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script src="./app.js" type="module"></script>
</body>
</html>
